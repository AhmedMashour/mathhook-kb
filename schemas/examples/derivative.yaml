# Example schema for symbolic differentiation
# This demonstrates the Hybrid Option C schema format

topic: "calculus.derivative"
title: "Symbolic Differentiation"

description: |
  Computes the derivative of an expression with respect to a variable using
  symbolic differentiation rules. Supports power rule, product rule, quotient
  rule, chain rule, and derivatives of elementary functions.

mathematical_definition: |
  $$\frac{d}{dx} f(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}$$

code_refs:
  rust: "mathhook_core::calculus::derivative"
  python: "mathhook.calculus.derivative"
  nodejs: "mathhook.calculus.derivative"

examples:
  - title: "Power Rule"
    explanation: |
      The derivative of x^n is n*x^(n-1). This is one of the fundamental
      rules of calculus and applies to any real exponent n.
    code:
      rust: |
        let x = symbol!(x);
        let f = expr!(x ^ 3);
        let df = f.derivative(&x, 1);
        // Result: 3*x^2
      python: |
        x = symbol('x')
        f = expr('x^3')
        df = f.derivative(x)
        # Result: 3*x^2
      nodejs: |
        const x = symbol('x');
        const f = expr('x^3');
        const df = f.derivative(x);
        // Result: 3*x^2
    expected_output: "3*x^2"

  - title: "Chain Rule"
    explanation: |
      When differentiating a composition of functions f(g(x)), we use the
      chain rule: (f∘g)'(x) = f'(g(x)) · g'(x)
    code:
      rust: |
        let x = symbol!(x);
        let f = expr!(sin(x ^ 2));
        let df = f.derivative(&x, 1);
        // Result: 2*x*cos(x^2)
      python: |
        x = symbol('x')
        f = expr('sin(x^2)')
        df = f.derivative(x)
        # Result: 2*x*cos(x^2)
      nodejs: |
        const x = symbol('x');
        const f = expr('sin(x^2)');
        const df = f.derivative(x);
        // Result: 2*x*cos(x^2)
    expected_output: "2*x*cos(x^2)"

  - title: "Product Rule"
    explanation: |
      For the product of two functions u(x)·v(x), the derivative is
      u'(x)·v(x) + u(x)·v'(x)
    code:
      rust: |
        let x = symbol!(x);
        let f = expr!((x ^ 2) * sin(x));
        let df = f.derivative(&x, 1);
        // Result: 2*x*sin(x) + x^2*cos(x)
      python: |
        x = symbol('x')
        f = expr('x^2 * sin(x)')
        df = f.derivative(x)
        # Result: 2*x*sin(x) + x^2*cos(x)
      nodejs: |
        const x = symbol('x');
        const f = expr('x^2 * sin(x)');
        const df = f.derivative(x);
        // Result: 2*x*sin(x) + x^2*cos(x)
    expected_output: "2*x*sin(x) + x^2*cos(x)"

use_cases:
  - "Physics: Computing velocity from position, acceleration from velocity"
  - "Machine Learning: Backpropagation (computing gradients of loss functions)"
  - "Economics: Marginal cost and revenue analysis"
  - "Optimization: Finding critical points and extrema"
  - "Engineering: Analyzing rates of change in dynamic systems"

related_topics:
  - "calculus.integral"
  - "calculus.chain_rule"
  - "calculus.partial_derivative"
  - "optimization.gradient_descent"
  - "calculus.taylor_series"

performance:
  complexity: "O(n)"
  typical_time: "0.5ms for simple polynomials, 2-5ms for complex nested functions"
  benchmarks:
    simple_polynomial: "0.3ms"
    trigonometric: "0.8ms"
    nested_composition: "2.4ms"

interactive_playground:
  enabled: true
  default_expression: "x^2 + 3*x + 1"
  default_variable: "x"

# Output-specific hints (Hybrid Option C)
outputs:
  jupyter:
    include_interactive_plots: true
    include_performance_section: false
    custom_intro: |
      Welcome to this tutorial on symbolic differentiation with MathHook!
      We'll explore how to compute derivatives symbolically, which is
      essential for calculus and machine learning applications.

  mdbook:
    include_mathematical_proof: true
    include_implementation_details: true
    runnable_code: true

  vue_site:
    include_live_demo: true
    seo_keywords:
      - "symbolic differentiation"
      - "calculus derivatives"
      - "automatic differentiation"
      - "symbolic math"
      - "derivative calculator"
    og_image: "/images/derivative-hero.png"

  api_docs:
    include_playground: true
    show_all_languages: true

  llm_rag:
    chunk_strategy: "by_example"
    max_chunk_size: 512
    embedding_priority: "high"

  colab:
    include_gpu_example: false
    install_command: "!pip install mathhook"

  latex:
    document_class: "article"
    additional_packages:
      - "amsmath"
      - "amssymb"
      - "tikz"

metadata:
  schema_version: "1.0"
  author: "MathHook Contributors"
  last_updated: "2025-01-17"
  tags:
    - "calculus"
    - "differentiation"
    - "symbolic-math"
    - "core-feature"
