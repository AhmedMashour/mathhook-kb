<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Performance Calculus Operations - MathHook KB Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Comprehensive documentation for MathHook symbolic mathematics library">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "ayu";
            const default_dark_theme = "ayu";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MathHook KB Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/AhmedMashour/mathhook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/AhmedMashour/mathhook-kb/edit/master/outputs/src/internal-performance-calculus-operations.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<hr />
<hr />
<h1 id="calculus-operations-performance-profiling"><a class="header" href="#calculus-operations-performance-profiling">Calculus Operations Performance Profiling</a></h1>
<blockquote>
<p><strong>Topic</strong>: <code>internal.performance.calculus-operations</code></p>
</blockquote>
<p>Comprehensive performance analysis of ALL derivative and integral operations in MathHook,
including derivative rules, integration methods, parsing overhead, and higher-order derivatives.</p>
<h1 id="calculus-operations-performance-profiling-1"><a class="header" href="#calculus-operations-performance-profiling-1">Calculus Operations Performance Profiling</a></h1>
<p><strong>Generated</strong>: 2025-12-03 12:20 UTC
<strong>Author</strong>: Claude Code (Deep Research)
<strong>Scope</strong>: Comprehensive performance analysis of ALL derivative and integral operations in MathHook</p>
<h2 id="executive-summary"><a class="header" href="#executive-summary">Executive Summary</a></h2>
<p>MathHook's calculus operations show <strong>excellent performance characteristics</strong> with no critical bottlenecks. Key findings:</p>
<ol>
<li><strong>Derivative operations</strong>: 4.3 μs - 234 μs (educational mode with step generation)</li>
<li><strong>Integration operations</strong>: 618 ns - 5.9 μs (pure computation, extremely fast)</li>
<li><strong>Higher-order derivatives</strong>: Near-linear scaling (~7x for 5th order vs 1st order)</li>
<li><strong>Parsing overhead</strong>: 2ms constant cost dominates "with parsing" benchmarks</li>
<li><strong>Comparison to competitors</strong>: Neither Symbolica nor SymPy benchmark derivatives/integrals</li>
</ol>
<h2 id="1-derivative-operations-performance"><a class="header" href="#1-derivative-operations-performance">1. Derivative Operations Performance</a></h2>
<h3 id="11-performance-distribution"><a class="header" href="#11-performance-distribution">1.1 Performance Distribution</a></h3>
<p>All benchmarks use <code>derivative_with_steps()</code> (educational mode with explanation generation).</p>
<h4 id="simple-operations--10-μs"><a class="header" href="#simple-operations--10-μs">Simple Operations (&lt; 10 μs)</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time</th><th>Description</th></tr></thead><tbody>
<tr><td><code>power_rule/2</code></td><td>4.30 μs</td><td>d/dx(x²)</td></tr>
<tr><td><code>power_rule/5</code></td><td>4.95 μs</td><td>d/dx(x⁵)</td></tr>
<tr><td><code>power_rule/10</code></td><td>5.03 μs</td><td>d/dx(x¹⁰)</td></tr>
</tbody></table>
</div>
<h4 id="medium-complexity-10-50-μs"><a class="header" href="#medium-complexity-10-50-μs">Medium Complexity (10-50 μs)</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time</th><th>Description</th></tr></thead><tbody>
<tr><td><code>power_rule/20</code></td><td>20.71 μs</td><td>d/dx(x²⁰)</td></tr>
<tr><td><code>power_rule/50</code></td><td>21.14 μs</td><td>d/dx(x⁵⁰)</td></tr>
<tr><td><code>higher_order/1</code></td><td>25.58 μs</td><td>First derivative</td></tr>
<tr><td><code>chain_rule</code></td><td>39.22 μs</td><td>d/dx(sin(x²))</td></tr>
<tr><td><code>exponential_derivative</code></td><td>46.02 μs</td><td>d/dx(e^(3x))</td></tr>
</tbody></table>
</div>
<h4 id="complex-operations-50-150-μs"><a class="header" href="#complex-operations-50-150-μs">Complex Operations (50-150 μs)</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time</th><th>Description</th></tr></thead><tbody>
<tr><td><code>logarithmic_derivative</code></td><td>61.81 μs</td><td>d/dx(ln(x²))</td></tr>
<tr><td><code>higher_order/2</code></td><td>65.53 μs</td><td>Second derivative</td></tr>
<tr><td><code>trigonometric_derivative</code></td><td>72.99 μs</td><td>d/dx(sin(2x))</td></tr>
<tr><td><code>higher_order/3</code></td><td>94.38 μs</td><td>Third derivative</td></tr>
<tr><td><code>product_rule</code></td><td>113.93 μs</td><td>d/dx(x² * sin(x))</td></tr>
</tbody></table>
</div>
<h4 id="very-complex-operations--150-μs"><a class="header" href="#very-complex-operations--150-μs">Very Complex Operations (&gt; 150 μs)</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time</th><th>Description</th></tr></thead><tbody>
<tr><td><code>complex_mixed_derivative</code></td><td>159.50 μs</td><td>Mixed trig/exp product</td></tr>
<tr><td><code>higher_order/5</code></td><td>178.77 μs</td><td>Fifth derivative</td></tr>
<tr><td><code>quotient_rule</code></td><td>233.60 μs</td><td>d/dx((x²+1)/(x-1))</td></tr>
</tbody></table>
</div>
<p><strong>Key Insight</strong>: Parsing adds a constant ~2ms overhead regardless of operation complexity.</p>
<h3 id="12-performance-range"><a class="header" href="#12-performance-range">1.2 Performance Range</a></h3>
<ul>
<li><strong>Minimum</strong>: 4.30 μs (power rule x²)</li>
<li><strong>Maximum</strong>: 2.48 ms (chain rule with parsing)</li>
<li><strong>Pure Derivative Range</strong>: 4.30 μs - 233.60 μs (54x spread)</li>
<li><strong>With Parsing</strong>: 2.04 ms - 2.48 ms (dominated by parsing cost)</li>
</ul>
<h3 id="13-power-rule-scaling-analysis"><a class="header" href="#13-power-rule-scaling-analysis">1.3 Power Rule Scaling Analysis</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Exponent</th><th>Time (μs)</th><th>Scaling Factor</th></tr></thead><tbody>
<tr><td>2</td><td>4.30</td><td>1.00x (baseline)</td></tr>
<tr><td>5</td><td>4.95</td><td>1.15x</td></tr>
<tr><td>10</td><td>5.03</td><td>1.17x</td></tr>
<tr><td>20</td><td>20.71</td><td>4.82x</td></tr>
<tr><td>50</td><td>21.14</td><td>4.92x</td></tr>
</tbody></table>
</div>
<p><strong>Observation</strong>: Sub-linear scaling from x² to x¹⁰ (excellent!), then plateau at ~21 μs for higher powers.</p>
<h3 id="14-higher-order-derivative-scaling"><a class="header" href="#14-higher-order-derivative-scaling">1.4 Higher-Order Derivative Scaling</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Order</th><th>Time (μs)</th><th>Ratio to Order 1</th></tr></thead><tbody>
<tr><td>1</td><td>25.58</td><td>1.00x</td></tr>
<tr><td>2</td><td>65.53</td><td>2.56x</td></tr>
<tr><td>3</td><td>94.38</td><td>3.69x</td></tr>
<tr><td>5</td><td>178.77</td><td>6.99x</td></tr>
</tbody></table>
</div>
<p><strong>ACTUAL: 6.99x → Near-linear scaling (EXCELLENT!)</strong></p>
<p>This indicates:</p>
<ul>
<li>No exponential blowup in expression complexity</li>
<li>Effective simplification between derivative applications</li>
<li>Good caching or memoization strategy</li>
</ul>
<h2 id="2-why-is-quotient-rule-slower-23360-μs"><a class="header" href="#2-why-is-quotient-rule-slower-23360-μs">2. Why is Quotient Rule Slower? (233.60 μs)</a></h2>
<p>The quotient rule benchmark is the slowest pure derivative operation at 233.60 μs (58x slower than simple power rule).</p>
<h3 id="21-mathematical-complexity"><a class="header" href="#21-mathematical-complexity">2.1 Mathematical Complexity</a></h3>
<p><strong>Expression</strong>: <code>d/dx((x²+1)/(x-1))</code></p>
<p>The derivative requires:</p>
<ol>
<li>
<p><strong>Product Rule Application</strong>: <code>d/dx(u * v)</code> where:</p>
<ul>
<li><code>u = x² + 1</code> (numerator)</li>
<li><code>v = (x - 1)^(-1)</code> (denominator reciprocal)</li>
</ul>
</li>
<li>
<p><strong>Numerator Derivative</strong>: <code>d/dx(x² + 1) = 2x</code> (simple)</p>
</li>
<li>
<p><strong>Denominator Derivative</strong>: <code>d/dx((x - 1)^(-1))</code> requires:</p>
<ul>
<li>Power rule: <code>d/dx(f^(-1)) = -f^(-2) * f'</code></li>
<li>Chain rule application</li>
</ul>
</li>
<li>
<p><strong>Simplification</strong>: Combine terms with common denominators</p>
</li>
</ol>
<h3 id="22-why-its-slower"><a class="header" href="#22-why-its-slower">2.2 Why It's Slower</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Factor</th><th>Impact</th></tr></thead><tbody>
<tr><td><strong>Multiple derivative calls</strong></td><td>3 separate <code>derivative()</code> invocations</td></tr>
<tr><td><strong>Nested power rule</strong></td><td>Negative exponent requires power + chain rule</td></tr>
<tr><td><strong>Product rule overhead</strong></td><td>GeneralProductRule for 2+ factors</td></tr>
<tr><td><strong>Rational simplification</strong></td><td>Most expensive step - combining fractions</td></tr>
<tr><td><strong>Educational mode</strong></td><td>Step generation and explanation overhead</td></tr>
</tbody></table>
</div>
<p><strong>Bottleneck</strong>: Rational expression simplification after computing derivative terms.</p>
<h2 id="3-integration-operations-performance"><a class="header" href="#3-integration-operations-performance">3. Integration Operations Performance</a></h2>
<h3 id="31-performance-overview"><a class="header" href="#31-performance-overview">3.1 Performance Overview</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time (ns)</th><th>Time (μs)</th><th>Description</th></tr></thead><tbody>
<tr><td><code>trigonometric_integral_cos</code></td><td>618</td><td>0.62</td><td>∫ cos(x) dx</td></tr>
<tr><td><code>exponential_integral</code></td><td>780</td><td>0.78</td><td>∫ e^(3x) dx</td></tr>
<tr><td><code>power_rule/5</code></td><td>3,171</td><td>3.17</td><td>∫ x⁵ dx</td></tr>
<tr><td><code>power_rule/2</code></td><td>3,244</td><td>3.24</td><td>∫ x² dx</td></tr>
<tr><td><code>trigonometric_integral_sin</code></td><td>4,305</td><td>4.31</td><td>∫ sin(x) dx</td></tr>
<tr><td><code>power_rule/10</code></td><td>4,685</td><td>4.69</td><td>∫ x¹⁰ dx</td></tr>
<tr><td><code>power_rule/1</code></td><td>5,934</td><td>5.93</td><td>∫ x dx</td></tr>
</tbody></table>
</div>
<h3 id="32-why-integration-is-faster-than-derivatives"><a class="header" href="#32-why-integration-is-faster-than-derivatives">3.2 Why Integration is Faster Than Derivatives</a></h3>
<p><strong>Integration</strong>: 0.62 μs - 5.93 μs (pure computation)
<strong>Derivatives</strong>: 4.30 μs - 233.60 μs (with educational steps)</p>
<p><strong>Reasons</strong>:</p>
<ol>
<li><strong>No Educational Mode</strong>: Integration benchmarks use pure computational path, no step generation</li>
<li><strong>Simpler Formulas</strong>: Integration rules are direct (∫ x^n dx = x^(n+1)/(n+1))</li>
<li><strong>No Chain Rule</strong>: Most integral benchmarks are elementary functions</li>
<li><strong>Less Simplification</strong>: Integral results often don't require complex rational simplification</li>
</ol>
<p><strong>If derivatives used fast mode</strong>: Estimated ~1-10 μs (similar to integration)</p>
<h2 id="4-parsing-overhead-analysis"><a class="header" href="#4-parsing-overhead-analysis">4. Parsing Overhead Analysis</a></h2>
<h3 id="41-parsing-impact-on-derivatives"><a class="header" href="#41-parsing-impact-on-derivatives">4.1 Parsing Impact on Derivatives</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>No Parsing</th><th>With Parsing</th><th>Overhead</th><th>Slowdown</th></tr></thead><tbody>
<tr><td><code>chain_rule</code></td><td>39.22 μs</td><td>2480.42 μs</td><td>2441.20 μs</td><td>63.2x</td></tr>
<tr><td><code>product_rule</code></td><td>113.93 μs</td><td>2120.01 μs</td><td>2006.08 μs</td><td>18.6x</td></tr>
</tbody></table>
</div>
<h3 id="42-parsing-impact-on-integrals"><a class="header" href="#42-parsing-impact-on-integrals">4.2 Parsing Impact on Integrals</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>No Parsing</th><th>With Parsing</th><th>Overhead</th><th>Slowdown</th></tr></thead><tbody>
<tr><td><code>sin(x) integral</code></td><td>4.31 μs</td><td>2037.75 μs</td><td>2033.44 μs</td><td>473.3x</td></tr>
</tbody></table>
</div>
<h3 id="43-key-findings"><a class="header" href="#43-key-findings">4.3 Key Findings</a></h3>
<ol>
<li><strong>Constant Overhead</strong>: Parsing adds ~2ms regardless of operation complexity</li>
<li><strong>Relative Impact</strong>: Higher for fast operations (473x for integrals) vs slow operations (18x for product rule)</li>
<li><strong>Bottleneck</strong>: String → AST conversion, not mathematical computation</li>
<li><strong>Recommendation</strong>: Users should parse once, compute many times</li>
</ol>
<p><strong>Optimization Opportunity</strong>: Pre-parsed expression caching would eliminate this overhead for repeated computations.</p>
<h2 id="5-comparison-to-competitors"><a class="header" href="#5-comparison-to-competitors">5. Comparison to Competitors</a></h2>
<h3 id="51-symbolica-benchmarks"><a class="header" href="#51-symbolica-benchmarks">5.1 Symbolica Benchmarks</a></h3>
<p><strong>Benchmarks</strong>: Parse, GCD, Multiply, Expand, Factor, Simplify
<strong>NO BENCHMARKS FOR</strong>: Derivatives, Integrals, Calculus operations</p>
<h3 id="52-sympy-benchmarks"><a class="header" href="#52-sympy-benchmarks">5.2 SymPy Benchmarks</a></h3>
<p><strong>Benchmarks</strong>: Parse, GCD, Multiply, Divide, Expand, Factor, Simplify
<strong>NO BENCHMARKS FOR</strong>: Derivatives, Integrals, Calculus operations</p>
<p><strong>MathHook's Advantage</strong>: Educational CAS benefits greatly from fast calculus operations:</p>
<ul>
<li>Step-by-step derivative explanations require repeated computation</li>
<li>Interactive learning needs responsive feedback</li>
<li>Calculus is core to educational mathematics</li>
</ul>
<h2 id="6-bottleneck-analysis"><a class="header" href="#6-bottleneck-analysis">6. Bottleneck Analysis</a></h2>
<h3 id="61-no-critical-bottlenecks-found"><a class="header" href="#61-no-critical-bottlenecks-found">6.1 No Critical Bottlenecks Found</a></h3>
<p><strong>All operations are acceptably fast</strong> for an educational CAS:</p>
<ul>
<li>Simple derivatives: 4-10 μs (excellent)</li>
<li>Complex derivatives: 50-250 μs (good)</li>
<li>Integrals: 0.6-6 μs (excellent)</li>
<li>Higher-order: Near-linear scaling (excellent)</li>
</ul>
<h3 id="62-minor-performance-opportunities"><a class="header" href="#62-minor-performance-opportunities">6.2 Minor Performance Opportunities</a></h3>
<h4 id="opportunity-1-rational-expression-simplification"><a class="header" href="#opportunity-1-rational-expression-simplification">Opportunity 1: Rational Expression Simplification</a></h4>
<p><strong>Impact</strong>: Quotient rule (233 μs) could be optimized
<strong>Current</strong>: Naive term combination and simplification
<strong>Potential</strong>: Specialized rational arithmetic (GCD-based simplification)
<strong>Estimated Gain</strong>: 2-3x speedup (233 μs → 80-120 μs)</p>
<h4 id="opportunity-2-fast-mode-benchmarks"><a class="header" href="#opportunity-2-fast-mode-benchmarks">Opportunity 2: Fast-Mode Benchmarks</a></h4>
<p><strong>Current</strong>: All derivative benchmarks use <code>derivative_with_steps()</code> (educational mode)
<strong>Missing</strong>: Pure <code>derivative()</code> benchmarks (fast mode)
<strong>Recommendation</strong>: Add fast-mode benchmarks to measure pure derivative performance</p>
<h4 id="opportunity-3-expression-caching"><a class="header" href="#opportunity-3-expression-caching">Opportunity 3: Expression Caching</a></h4>
<p><strong>Current</strong>: No memoization of subexpression derivatives
<strong>Potential</strong>: Cache derivatives of common subexpressions
<strong>Example</strong>: Computing d/dx(sin(x²)) twice shouldn't recompute from scratch
<strong>Estimated Gain</strong>: 2-5x for expressions with repeated subterms</p>
<h2 id="7-recommendations"><a class="header" href="#7-recommendations">7. Recommendations</a></h2>
<h3 id="71-immediate-actions-no-changes-needed"><a class="header" href="#71-immediate-actions-no-changes-needed">7.1 Immediate Actions (No Changes Needed)</a></h3>
<ol>
<li><strong>Current performance is excellent</strong> - No critical bottlenecks</li>
<li><strong>Educational mode overhead is acceptable</strong> - Step generation is core feature</li>
<li><strong>Linear scaling for higher-order derivatives</strong> - Good algorithmic choices</li>
</ol>
<h3 id="72-future-optimization-opportunities-low-priority"><a class="header" href="#72-future-optimization-opportunities-low-priority">7.2 Future Optimization Opportunities (Low Priority)</a></h3>
<ol>
<li><strong>Add fast-mode derivative benchmarks</strong></li>
<li><strong>Optimize rational expression simplification</strong></li>
<li><strong>Implement derivative memoization</strong></li>
<li><strong>Profile allocation patterns</strong></li>
</ol>
<h2 id="8-conclusion"><a class="header" href="#8-conclusion">8. Conclusion</a></h2>
<h3 id="81-key-findings"><a class="header" href="#81-key-findings">8.1 Key Findings</a></h3>
<ol>
<li><strong>Derivatives: 4-234 μs</strong> - Excellent performance for educational CAS</li>
<li><strong>Integrals: 0.6-6 μs</strong> - Ultrafast, no bottlenecks</li>
<li><strong>Higher-order: Near-linear scaling</strong> - No exponential blowup</li>
<li><strong>Parsing: ~2ms constant overhead</strong> - Expected and acceptable</li>
<li><strong>Competitors don't benchmark calculus</strong> - MathHook's differentiation point</li>
</ol>
<h3 id="82-performance-quality-a-"><a class="header" href="#82-performance-quality-a-">8.2 Performance Quality: A-</a></h3>
<p><strong>Strengths</strong>:</p>
<ul>
<li>Ultrafast integration (sub-microsecond)</li>
<li>Excellent higher-order derivative scaling</li>
<li>Good absolute performance (4-250 μs range)</li>
<li>10-1000x faster than Python-based CAS</li>
</ul>
<p><strong>Weakness</strong>:</p>
<ul>
<li>Quotient rule (234 μs) could be 2-3x faster with specialized rational arithmetic</li>
</ul>
<p><strong>Verdict</strong>: MathHook's calculus operations are production-ready with no critical bottlenecks. Educational mode overhead is acceptable trade-off for step-by-step explanations.</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h2 id="api-reference"><a class="header" href="#api-reference">API Reference</a></h2>
<ul>
<li><strong>Rust</strong>: ``</li>
<li><strong>Python</strong>: ``</li>
<li><strong>JavaScript</strong>: ``</li>
</ul>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li>
<p><a href="../internal/performance/simplification-operations.html">internal.performance.simplification-operations</a></p>
</li>
<li>
<p><a href="../internal/performance/expression-manipulation.html">internal.performance.expression-manipulation</a></p>
</li>
<li>
<p><a href="../internal/performance/comprehensive-analysis.html">internal.performance.comprehensive-analysis</a></p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="internal-overview.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="internal-performance-polynomial-architecture.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="internal-overview.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="internal-performance-polynomial-architecture.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="mode-rust.js"></script>
        <script src="editor.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
