{
  "topic": "architecture.thread-safety",
  "title": "Thread Safety Guarantees",
  "description": "Immutable expressions enable thread-safe sharing and parallel processing without locks.\nCovers concurrency patterns and safety guarantees in MathHook.\n",
  "code_refs": {
    "rust": "mathhook_core::Expression"
  },
  "article": {
    "content": "# Thread Safety Guarantees\n\nThis chapter covers internal implementation details of thread safety.\n\n## Immutability\n\nAll expressions are immutable after creation. This provides:\n\n- **Thread-safe sharing**: No data races\n- **Lock-free operations**: No synchronization overhead\n- **Predictable behavior**: No surprising mutations\n\n## Parallel Processing\n\nImmutability enables efficient parallel processing:\n\n```rust\n# extern crate mathhook_book;\n# use mathhook_book::mathhook;\n# use mathhook::prelude::*;\nlet expressions = vec![/* many expressions */];\nlet simplified = parallel_bulk_simplify(&expressions);\n```\n\n## Concurrency Patterns\n\nMathHook supports common concurrency patterns:\n\n- **Data parallelism**: Process multiple expressions in parallel\n- **Pipeline parallelism**: Chain operations across threads\n- **Work stealing**: Dynamic load balancing\n\n## Safety Guarantees\n\nRust's type system enforces:\n\n- **No data races**: Guaranteed at compile time\n- **No iterator invalidation**: Immutable collections\n- **No use-after-free**: Ownership system prevents\n"
  },
  "related_topics": [
    "architecture.principles",
    "architecture.memory-layout",
    "architecture.type-system"
  ],
  "metadata": {
    "schema_version": "1.0"
  }
}