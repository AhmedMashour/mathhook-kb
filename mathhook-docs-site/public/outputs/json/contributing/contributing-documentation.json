{
  "topic": "contributing.documentation",
  "title": "Documentation Standards",
  "description": "Documentation must be accurate, complete, and match the actual code.\nCovers API documentation, doctests, mdbook, and keeping docs updated.\n",
  "article": {
    "content": "# Documentation Standards\n\nDocumentation must be accurate, complete, and match the actual code.\n\n## Required Documentation\n\n### Public API\n\nEvery public function, struct, trait, and enum needs documentation:\n\n```rust\n/// Compute the derivative of an expression.\n///\n/// # Arguments\n///\n/// * `expr` - The expression to differentiate\n/// * `var` - The variable to differentiate with respect to\n///\n/// # Returns\n///\n/// * `Ok(Expression)` - The derivative\n/// * `Err(MathError)` - If differentiation fails\n///\n/// # Examples\n///\n/// ```rust\n/// use mathhook::prelude::*;\n///\n/// let x = symbol!(x);\n/// let f = expr!(x ^ 2);\n/// let df = differentiate(&f, &x)?;\n/// assert_eq!(df, expr!(2 * x));\n/// ```\npub fn differentiate(expr: &Expression, var: &Symbol) -> Result<Expression, MathError>\n```\n\n### Module Level\n\nEach module needs a `//!` header:\n\n```rust\n//! Polynomial operations for symbolic computation.\n//!\n//! This module provides:\n//! - GCD computation via Euclidean algorithm\n//! - Polynomial division with remainder\n//! - Factorization over integers and finite fields\n```\n\n## Documentation Structure\n\n### Example Pattern\n\n```rust\n/// Brief one-line description.\n///\n/// Longer explanation if needed, describing behavior,\n/// mathematical background, or implementation notes.\n///\n/// # Arguments\n///\n/// * `param1` - Description\n/// * `param2` - Description\n///\n/// # Returns\n///\n/// Description of return value or Result variants.\n///\n/// # Errors\n///\n/// - `MathError::DomainError` - When input is outside valid domain\n/// - `MathError::Undefined` - When result is mathematically undefined\n///\n/// # Panics\n///\n/// This function does not panic. (Or list panic conditions if any)\n///\n/// # Examples\n///\n/// ```rust\n/// // Working example with assertions\n/// ```\n///\n/// # Mathematical Background\n///\n/// Optional section for complex algorithms.\npub fn function_name(...) { ... }\n```\n\n## Doctests\n\n### Requirements\n\n1. **Every example must compile and run**\n2. **Include assertions to verify behavior**\n3. **Use `use mathhook::prelude::*;`** for common imports\n\n### Patterns\n\n```rust\n/// # Examples\n///\n/// Basic usage:\n/// ```rust\n/// use mathhook::prelude::*;\n///\n/// let x = symbol!(x);\n/// let result = sin(&expr!(0)).unwrap();\n/// assert_eq!(result, expr!(0));\n/// ```\n///\n/// Error handling:\n/// ```rust\n/// use mathhook::prelude::*;\n///\n/// let result = log(&expr!(0));\n/// assert!(result.is_err());\n/// ```\n```\n\n### Hidden Lines\n\nUse `#` to hide setup code:\n\n```rust\n/// ```rust\n/// # use mathhook::prelude::*;\n/// # fn main() -> Result<(), Box<dyn std::error::Error>> {\n/// let x = symbol!(x);\n/// let f = expr!(x ^ 2);\n/// # Ok(())\n/// # }\n/// ```\n```\n\n## mdbook Documentation\n\n### Location\n\nAll user-facing documentation lives in `docs/src/`.\n\n### Building\n\n```bash\ncd docs\nmdbook serve --open  # Preview at localhost:3000\nmdbook build         # Build static site\n```\n\n### LaTeX\n\nUse `$...$` for inline math and `$$...$$` for display math:\n\n```markdown\nThe quadratic formula is $x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}$.\n\nFor the heat equation:\n\n$$\\frac{\\partial u}{\\partial t} = \\alpha \\nabla^2 u$$\n```\n\n**Note:** We use mdbook-katex preprocessor. Avoid characters that conflict with Markdown (escape underscores in text mode).\n\n## Code Examples in Docs\n\n### Always Use Macros\n\n```markdown\n✅ Correct:\n​```rust\nlet x = symbol!(x);\nlet f = expr!(x ^ 2 + 2 * x + 1);\n​```\n\n❌ Wrong:\n​```rust\nlet x = Symbol::new(\"x\");  // Never in docs\n​```\n```\n\n### Show Practical Usage\n\n```markdown\n// Complete working example\nlet x = symbol!(x);\nlet f = expr!(sin(x) ^ 2 + cos(x) ^ 2);\nlet simplified = simplify(&f);\nassert_eq!(simplified, expr!(1));\n```\n\n## API Reference Accuracy\n\n### Verify Before Publishing\n\n1. **Check function signatures** match actual code\n2. **Verify return types** (especially `Result` vs direct return)\n3. **Test all examples** with `cargo test --doc`\n4. **Check method names** match (`.to_latex()` parameters, etc.)\n\n### Common Errors\n\n| Error | Example | Fix |\n|-------|---------|-----|\n| Wrong method signature | `.to_latex(ctx)` | Check actual API |\n| Outdated macro | `Symbol::matrix(\"A\")` | Use `symbol!(A; matrix)` |\n| Missing Result handling | `function(&x)` | Add `.unwrap()` or `?` |\n| Wrong import | `use mathhook::*` | `use mathhook::prelude::*` |\n\n## Keeping Docs Updated\n\n### When Code Changes\n\n1. Update corresponding documentation\n2. Run `cargo test --doc` to verify examples\n3. Check mdbook builds without errors\n\n### Audit Process\n\n```bash\n# Find potentially outdated patterns\ngrep -r \"Symbol::new\" docs/src/\ngrep -r \"Symbol::matrix\" docs/src/\ngrep -r \"LaTeXContext::default\" docs/src/\n\n# Verify mdbook builds\ncd docs && mdbook build\n```\n\n## What NOT to Document\n\n1. **Private implementation details** - They can change\n2. **Obvious behavior** - `add` adds things\n3. **Internal helper functions** - Unless exposed publicly\n4. **Deprecated patterns** - Remove, don't document\n"
  },
  "related_topics": [
    "contributing.development",
    "contributing.style",
    "contributing.testing"
  ],
  "metadata": {
    "schema_version": "1.0"
  }
}