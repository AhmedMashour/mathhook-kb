{
  "topic": "bindings.nodejs",
  "title": "Node.js/TypeScript API Guide",
  "description": "Complete guide to using MathHook from Node.js and TypeScript via NAPI bindings.\nProvides comprehensive documentation for the JavaScript/TypeScript API including installation,\nquick start, API reference, integration patterns with Express/Next.js, and performance best practices.\n",
  "code_refs": {
    "rust": "mathhook",
    "python": "mathhook",
    "nodejs": "mathhook"
  },
  "examples": [
    {
      "title": "Basic Parsing and Simplification",
      "explanation": "Parse mathematical expressions from strings and simplify them",
      "code": {
        "rust": "use mathhook::{expr, symbol, simplify, expand};\n\nlet x = symbol!(x);\nlet expr = expr!(x + x);\nlet result = simplify(expr);  // 2*x\n\nlet expr2 = expr!((x + 1)^2);\nlet expanded = expand(expr2);  // x^2 + 2*x + 1\n",
        "python": "from mathhook import parse, simplify, expand\n\nexpr = parse('x + x')\nresult = simplify(expr)\nprint(result)  # 2*x\n\nexpr2 = parse('(x + 1)^2')\nexpanded = expand(expr2)\nprint(expanded)  # x^2 + 2*x + 1\n",
        "nodejs": "const { parse, simplify } = require('mathhook');\n\nconst expr = parse('x + x');\nconst result = simplify(expr);\nconsole.log(result.toString());  // 2*x\n\nconst expr2 = parse('(x + 1)^2');\nconst expanded = expand(expr2);\nconsole.log(expanded.toString());  // x^2 + 2*x + 1\n"
      }
    },
    {
      "title": "TypeScript Type Safety",
      "explanation": "Use TypeScript for type-safe mathematical operations",
      "code": {
        "nodejs": "import { Symbol, Expression, parse, simplify } from 'mathhook';\n\n// Type-safe symbol creation\nconst x: Symbol = new Symbol('x');\nconst y: Symbol = new Symbol('y');\n\n// Type-safe expression parsing\nconst expr: Expression = parse('x^2 + 2*x + 1');\n\n// Type-safe operations\nconst simplified: Expression = simplify(expr);\nconsole.log(simplified.toString());  // (x + 1)^2\n"
      }
    },
    {
      "title": "Derivatives in TypeScript",
      "explanation": "Compute symbolic derivatives with TypeScript type safety",
      "code": {
        "rust": "use mathhook::{expr, symbol, derivative};\n\nlet x = symbol!(x);\nlet expr = expr!(x^3);\n\n// First derivative\nlet df = derivative(&expr, &x, 1);\n// Result: 3*x^2\n\n// Second derivative\nlet d2f = derivative(&expr, &x, 2);\n// Result: 6*x\n",
        "python": "from mathhook import Symbol, parse, derivative\n\nx = Symbol('x')\nexpr = parse('x^3')\n\n# First derivative\ndf = derivative(expr, x)\nprint(df)  # 3*x^2\n\n# Second derivative\nd2f = derivative(expr, x, order=2)\nprint(d2f)  # 6*x\n",
        "nodejs": "import { Symbol, parse, derivative } from 'mathhook';\n\nconst x = new Symbol('x');\nconst expr = parse('x^3');\n\n// First derivative\nconst df = derivative(expr, x);\nconsole.log(df.toString());  // 3*x^2\n\n// Second derivative\nconst d2f = derivative(expr, x, { order: 2 });\nconsole.log(d2f.toString());  // 6*x\n"
      }
    },
    {
      "title": "Express.js API Integration",
      "explanation": "Build a REST API for mathematical operations using Express.js",
      "code": {
        "nodejs": "import express from 'express';\nimport { parse, simplify, toLatex, derivative, Symbol } from 'mathhook';\n\nconst app = express();\napp.use(express.json());\n\n// Simplify endpoint\napp.post('/api/simplify', (req, res) => {\n    try {\n        const { expression } = req.body;\n        const expr = parse(expression);\n        const simplified = simplify(expr);\n\n        res.json({\n            original: expression,\n            simplified: simplified.toString(),\n            latex: toLatex(simplified)\n        });\n    } catch (error) {\n        res.status(400).json({ error: error.message });\n    }\n});\n\n// Derivative endpoint\napp.post('/api/derivative', (req, res) => {\n    try {\n        const { expression, variable } = req.body;\n        const expr = parse(expression);\n        const x = new Symbol(variable);\n        const deriv = derivative(expr, x);\n\n        res.json({\n            expression: expression,\n            derivative: deriv.toString(),\n            latex: toLatex(deriv)\n        });\n    } catch (error) {\n        res.status(400).json({ error: error.message });\n    }\n});\n\napp.listen(3000, () => {\n    console.log('Math API running on port 3000');\n});\n"
      }
    },
    {
      "title": "Next.js Server Actions",
      "explanation": "Use MathHook in Next.js server actions for server-side computation",
      "code": {
        "nodejs": "// app/actions/math.ts\n'use server';\n\nimport { parse, simplify, derivative, Symbol } from 'mathhook';\n\nexport async function simplifyExpression(expression: string) {\n    try {\n        const expr = parse(expression);\n        const simplified = simplify(expr);\n        return {\n            success: true,\n            result: simplified.toString()\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n\nexport async function computeDerivative(expression: string, variable: string) {\n    try {\n        const expr = parse(expression);\n        const x = new Symbol(variable);\n        const deriv = derivative(expr, x);\n        return {\n            success: true,\n            result: deriv.toString()\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n"
      }
    },
    {
      "title": "WebSocket Server",
      "explanation": "Build a WebSocket server for real-time mathematical computation",
      "code": {
        "nodejs": "import { WebSocketServer } from 'ws';\nimport { parse, simplify, derivative, Symbol } from 'mathhook';\n\nconst wss = new WebSocketServer({ port: 8080 });\n\nwss.on('connection', (ws) => {\n    ws.on('message', (data) => {\n        try {\n            const request = JSON.parse(data.toString());\n\n            switch (request.operation) {\n                case 'simplify': {\n                    const expr = parse(request.expression);\n                    const result = simplify(expr);\n                    ws.send(JSON.stringify({\n                        operation: 'simplify',\n                        result: result.toString()\n                    }));\n                    break;\n                }\n                case 'derivative': {\n                    const expr = parse(request.expression);\n                    const x = new Symbol(request.variable);\n                    const result = derivative(expr, x);\n                    ws.send(JSON.stringify({\n                        operation: 'derivative',\n                        result: result.toString()\n                    }));\n                    break;\n                }\n            }\n        } catch (error) {\n            ws.send(JSON.stringify({ error: error.message }));\n        }\n    });\n});\n"
      }
    },
    {
      "title": "Evaluation with Context",
      "explanation": "Advanced evaluation with custom contexts and variable substitutions",
      "code": {
        "python": "from mathhook import PyExpression as Expression, EvalContext\n\nx = Expression.symbol(\"x\")\ny = Expression.symbol(\"y\")\n\n# Formula: x² + 2xy + y²\nexpr = x.pow(Expression.integer(2)).add(\n    Expression.integer(2).multiply(x).multiply(y)\n).add(y.pow(Expression.integer(2)))\n\n# Create numerical context with variable substitutions\nctx = EvalContext.numeric({\n    \"x\": Expression.integer(3),\n    \"y\": Expression.integer(4)\n})\n\n# Evaluate: (3)² + 2(3)(4) + (4)² = 9 + 24 + 16 = 49\nresult = expr.evaluate_with_context(ctx)\nprint(result)  # 49\n",
        "nodejs": "import { JsExpression, EvalContext, symbols } from 'mathhook';\n\nfunction symbol(name: string) {\n    const [sym] = symbols(name);\n    return sym;\n}\n\nfunction integer(n: number) {\n    return JsExpression.integer(n);\n}\n\nconst x = symbol('x');\nconst y = symbol('y');\n\n// Formula: x² + 2xy + y²\nconst expr = x.pow(integer(2))\n    .add(integer(2).multiply(x).multiply(y))\n    .add(y.pow(integer(2)));\n\n// Create numerical context with variable substitutions\nconst ctx = EvalContext.numeric([\n    ['x', integer(3)],\n    ['y', integer(4)]\n]);\n\n// Evaluate: (3)² + 2(3)(4) + (4)² = 9 + 24 + 16 = 49\nconst result = expr.evaluateWithContext(ctx);\nconsole.log(result.toSimple());  // '49'\n\n// Symbolic evaluation (no numerical conversion)\nconst ctxSymbolic = EvalContext.symbolic();\nconst resultSymbolic = expr.evaluateWithContext(ctxSymbolic);\nconsole.log(resultSymbolic.toSimple());  // 'x^2 + 2*x*y + y^2' (still symbolic)\n"
      }
    }
  ],
  "article": {
    "content": "# Node.js/TypeScript API Guide\n\nComplete guide to using MathHook from Node.js and TypeScript via NAPI bindings.\n\n## Installation\n\n```bash\nnpm install mathhook\n# or\nyarn add mathhook\n# or\npnpm add mathhook\n```\n\n**Requirements**:\n- Node.js 16.0 or higher\n- npm 7.0 or higher\n\n**Platform Support**:\n- Linux (x86_64, aarch64)\n- macOS (Intel, Apple Silicon)\n- Windows (x86_64)\n\n**TypeScript Support**: Type definitions included (.d.ts files bundled)\n\n## Quick Start\n\n### JavaScript\n\n```javascript\nconst { Symbol, parse, simplify } = require('mathhook');\n\n// Create symbols\nconst x = new Symbol('x');\nconst y = new Symbol('y');\n\n// Build expressions\nconst expr = parse('x^2 + 2*x + 1');\n\n// Simplify\nconst simplified = simplify(expr);\nconsole.log(simplified.toString());  // (x + 1)^2\n```\n\n### TypeScript\n\n```typescript\nimport { Symbol, Expression, parse, simplify } from 'mathhook';\n\n// Create symbols (with type safety)\nconst x: Symbol = new Symbol('x');\nconst y: Symbol = new Symbol('y');\n\n// Build expressions\nconst expr: Expression = parse('x^2 + 2*x + 1');\n\n// Simplify\nconst simplified: Expression = simplify(expr);\nconsole.log(simplified.toString());  // (x + 1)^2\n```\n\n## Why MathHook for Node.js?\n\n### Performance Comparison\n\n**Native Performance in JavaScript**:\n- Rust core compiled to native code via NAPI\n- No V8 overhead for mathematical operations\n- Faster than pure JavaScript CAS libraries\n\n```javascript\nconst { parse, simplify } = require('mathhook');\n\n// Large polynomial expression\nconst terms = Array.from({length: 100}, (_, i) => `${i}*x^${i}`);\nconst exprStr = terms.join(' + ');\n\n// MathHook\nconst start = Date.now();\nconst expr = parse(exprStr);\nconst result = simplify(expr);\nconst mathhookTime = Date.now() - start;\n\nconsole.log(`MathHook: ${mathhookTime}ms`);\n// Typical: MathHook 1-5ms vs JavaScript CAS 100-500ms\n```\n\n### When to Use MathHook\n\n**Use MathHook when**:\n- Building web applications with symbolic math (calculators, graphing, education)\n- Server-side computation for math APIs\n- Real-time symbolic computation requirements\n- Need LaTeX parsing and rendering\n\n**Integration Points**:\n- Express/Fastify APIs for math endpoints\n- Next.js/Nuxt.js server-side rendering\n- WebSocket servers for interactive math applications\n- GraphQL resolvers for mathematical queries\n"
  },
  "related_topics": [
    "bindings.python",
    "bindings.wasm",
    "getting-started.installation",
    "operations.simplification",
    "operations.differentiation",
    "parser.latex"
  ],
  "metadata": {
    "schema_version": "1.0"
  }
}