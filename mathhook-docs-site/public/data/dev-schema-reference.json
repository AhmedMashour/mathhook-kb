{
  "topic": "dev.schema-reference",
  "title": "Schema Reference",
  "description": "Complete specification of the MathHook Knowledge Base schema format. Defines required fields, optional metadata, output hints, and validation rules for documentation schemas.",
  "mathematical_definition": "\\text{Schema} = \\{\\text{core}_{req}, \\text{metadata}_{opt}, \\text{outputs}_{opt}\\}",
  "examples": [
    {
      "title": "Minimal Valid Schema",
      "explanation": "A minimal schema requires only the core fields: topic, title, description, and at least one example with multi-language code.\n\n**Required fields**: topic, title, description, examples",
      "code": {
        "python": "# Python representation of minimal schema\nminimal_schema = {\n    # === CORE CONTENT (Required) ===\n    'topic': 'calculus.derivative',\n    'title': 'Symbolic Differentiation',\n    'description': 'Computes the derivative of an expression.',\n    \n    # At least one example required\n    'examples': [\n        {\n            'title': 'Basic Example',\n            'explanation': 'Derivative of x^2',\n            'code': {\n                'python': 'from mathhook import derivative\\nresult = derivative(x**2, x)',\n                'rust': 'let result = expr!(x^2).derivative(&x, 1);',\n                'nodejs': 'const result = derivative(expr(\"x^2\"), x);',\n            },\n        }\n    ],\n}\n\n# This is valid! All other fields are optional.\n",
        "rust": "// Rust Schema struct for minimal schema\nuse serde::{Deserialize, Serialize};\n\n#[derive(Debug, Deserialize, Serialize)]\npub struct Schema {\n    // Required fields\n    pub topic: String,\n    pub title: String,\n    pub description: String,\n    pub examples: Vec<Example>,\n    \n    // Optional fields\n    #[serde(default)]\n    pub mathematical_definition: Option<String>,\n    #[serde(default)]\n    pub code_refs: Option<CodeRefs>,\n    #[serde(default)]\n    pub use_cases: Option<Vec<String>>,\n    #[serde(default)]\n    pub related_topics: Option<Vec<String>>,\n    #[serde(default)]\n    pub article: Option<Article>,\n    #[serde(default)]\n    pub outputs: Option<OutputHints>,\n}\n\n#[derive(Debug, Deserialize, Serialize)]\npub struct Example {\n    pub title: String,\n    pub explanation: String,\n    pub code: MultiLangCode,\n    #[serde(default)]\n    pub expected_output: Option<String>,\n}\n",
        "nodejs": "// TypeScript schema interface\ninterface Schema {\n    // Required\n    topic: string;\n    title: string;\n    description: string;\n    examples: Example[];\n    \n    // Optional\n    mathematical_definition?: string;\n    code_refs?: CodeRefs;\n    use_cases?: string[];\n    related_topics?: string[];\n    article?: Article;\n    outputs?: OutputHints;\n}\n\ninterface Example {\n    title: string;\n    explanation: string;\n    code: {\n        python: string;\n        rust: string;\n        nodejs: string;\n    };\n    expected_output?: string;\n}\n"
      },
      "expected_output": "Schema validated: calculus.derivative\nRequired fields: OK\nExamples: 1 (minimum met)"
    },
    {
      "title": "Full Schema Example",
      "explanation": "A complete schema includes all optional fields for rich documentation generation.\n\n**Sections**:\n- Core content (required)\n- Code references\n- Examples with expected output\n- Metadata (use_cases, related_topics)\n- Article content\n- Output hints",
      "code": {
        "python": "# Complete schema YAML (as Python dict)\nfull_schema = {\n    # === CORE CONTENT (Required) ===\n    'topic': 'calculus.derivative',\n    'title': 'Symbolic Differentiation',\n    'description': '''Computes the derivative of an expression with respect\nto a variable using symbolic differentiation rules (power rule, chain rule, etc.).''',\n    \n    'mathematical_definition': r'$$\\frac{d}{dx} f(x) = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h}$$',\n    \n    # === CODE REFERENCES ===\n    'code_refs': {\n        'rust': 'mathhook_core::calculus::derivative',\n        'python': 'mathhook.calculus.derivative',\n        'nodejs': 'mathhook.calculus.derivative',\n    },\n    \n    # === EXAMPLES ===\n    'examples': [\n        {\n            'title': 'Power Rule',\n            'explanation': 'Derivative of x^n is n*x^(n-1)',\n            'code': {\n                'python': 'result = derivative(x**3, x)  # 3*x^2',\n                'rust': 'let df = expr!(x^3).derivative(&x, 1);',\n                'nodejs': 'const df = derivative(expr(\"x^3\"), x);',\n            },\n            'expected_output': '3*x^2',\n        },\n    ],\n    \n    # === METADATA ===\n    'use_cases': [\n        'Physics: Computing velocity from position',\n        'Machine Learning: Backpropagation gradients',\n    ],\n    'related_topics': ['calculus.integral', 'calculus.chain_rule'],\n    'performance': {\n        'complexity': 'O(n)',\n        'typical_time': '0.5ms',\n    },\n    \n    # === ARTICLE CONTENT ===\n    'article': {\n        'introduction': {\n            'hook': 'The derivative measures instantaneous rate of change...',\n        },\n        'sections': [\n            {'title': 'Theory', 'content': 'The formal definition...'},\n            {'title': 'Applications', 'content': 'Used in physics...'},\n        ],\n    },\n    \n    # === OUTPUT HINTS ===\n    'outputs': {\n        'jupyter': {'include_interactive_plots': True},\n        'vue_site': {'seo_keywords': ['differentiation', 'calculus']},\n    },\n}\n",
        "rust": "// YAML file: schemas/calculus/derivative.yaml\nlet yaml_content = r#\"\n# === CORE CONTENT (Required) ===\ntopic: \"calculus.derivative\"\ntitle: \"Symbolic Differentiation\"\n\ndescription: |\n  Computes the derivative of an expression with respect to a variable\n  using symbolic differentiation rules (power rule, chain rule, etc.).\n\nmathematical_definition: |\n  $$\\frac{d}{dx} f(x) = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h}$$\n\n# === CODE REFERENCES ===\ncode_refs:\n  rust: \"mathhook_core::calculus::derivative\"\n  python: \"mathhook.calculus.derivative\"\n  nodejs: \"mathhook.calculus.derivative\"\n\n# === EXAMPLES ===\nexamples:\n  - title: \"Power Rule\"\n    explanation: \"Derivative of x^n is n*x^(n-1)\"\n    code:\n      rust: |\n        let x = symbol!(x);\n        let f = expr!(x ^ 3);\n        let df = f.derivative(&x, 1);\n        // Result: 3*x^2\n      python: |\n        x = symbol('x')\n        f = expr('x^3')\n        df = f.derivative(x)\n        # Result: 3*x^2\n      nodejs: |\n        const x = symbol('x');\n        const f = expr('x^3');\n        const df = f.derivative(x);\n        // Result: 3*x^2\n    expected_output: \"3*x^2\"\n\n# === METADATA ===\nuse_cases:\n  - \"Physics: Computing velocity from position\"\n  - \"Machine Learning: Backpropagation gradients\"\n\nrelated_topics:\n  - \"calculus.integral\"\n  - \"calculus.chain_rule\"\n\nperformance:\n  complexity: \"O(n)\"\n  typical_time: \"0.5ms\"\n\"#;\n",
        "nodejs": "// JSON representation for Vue site\nconst schemaJson = {\n    topic: 'calculus.derivative',\n    title: 'Symbolic Differentiation',\n    description: 'Computes the derivative...',\n    mathematical_definition: '$$\\\\frac{d}{dx} f(x) = ...',\n    \n    code_refs: {\n        rust: 'mathhook_core::calculus::derivative',\n        python: 'mathhook.calculus.derivative',\n        nodejs: 'mathhook.calculus.derivative',\n    },\n    \n    examples: [{\n        title: 'Power Rule',\n        explanation: 'Derivative of x^n is n*x^(n-1)',\n        code: {\n            python: 'result = derivative(x**3, x)',\n            rust: 'let df = expr!(x^3).derivative(&x, 1);',\n            nodejs: 'const df = derivative(expr(\"x^3\"), x);',\n        },\n        expected_output: '3*x^2',\n    }],\n    \n    use_cases: [\n        'Physics: Computing velocity from position',\n        'Machine Learning: Backpropagation gradients',\n    ],\n    related_topics: ['calculus.integral', 'calculus.chain_rule'],\n    \n    article: {\n        introduction: { hook: 'The derivative measures...' },\n        sections: [\n            { title: 'Theory', content: '...' },\n        ],\n    },\n    \n    outputs: {\n        vue_site: { seo_keywords: ['differentiation', 'calculus'] },\n    },\n};\n"
      },
      "expected_output": "Full schema validated:\n- Core fields: OK\n- Code refs: 3 languages\n- Examples: 1 with expected output\n- Metadata: use_cases, related_topics\n- Article: intro + 2 sections\n- Output hints: jupyter, vue_site"
    },
    {
      "title": "Output Hints Configuration",
      "explanation": "Output hints customize generation for specific formats. Each generator reads its hints and adjusts output accordingly.\n\n**Available hint sections**: jupyter, mdbook, vue_site, api_docs, llm_rag, latex",
      "code": {
        "python": "# Output hints structure\noutput_hints = {\n    'jupyter': {\n        'include_interactive_plots': True,\n        'include_performance_section': False,\n        'kernel': 'python3',\n    },\n    \n    'mdbook': {\n        'include_mathematical_proof': True,\n        'runnable_code': True,\n        'hide_nodejs_examples': False,\n    },\n    \n    'vue_site': {\n        'include_live_demo': True,\n        'seo_keywords': ['symbolic differentiation', 'calculus', 'math'],\n        'og_image': 'derivative-og.png',\n    },\n    \n    'api_docs': {\n        'include_playground': True,\n        'show_all_languages': True,\n        'link_to_source': True,\n    },\n    \n    'llm_rag': {\n        'chunk_strategy': 'by_example',  # or 'by_section', 'fixed_size'\n        'max_chunk_size': 512,\n        'include_metadata': True,\n    },\n    \n    'latex': {\n        'document_class': 'article',\n        'include_proofs': True,\n        'bibliography_style': 'plain',\n    },\n}\n",
        "rust": "// Rust types for output hints\n#[derive(Debug, Default, Deserialize, Serialize)]\npub struct OutputHints {\n    #[serde(default)]\n    pub jupyter: Option<JupyterHints>,\n    #[serde(default)]\n    pub mdbook: Option<MdBookHints>,\n    #[serde(default)]\n    pub vue_site: Option<VueSiteHints>,\n    #[serde(default)]\n    pub api_docs: Option<ApiDocsHints>,\n    #[serde(default)]\n    pub llm_rag: Option<LlmRagHints>,\n    #[serde(default)]\n    pub latex: Option<LatexHints>,\n}\n\n#[derive(Debug, Default, Deserialize, Serialize)]\npub struct JupyterHints {\n    #[serde(default)]\n    pub include_interactive_plots: bool,\n    #[serde(default)]\n    pub include_performance_section: bool,\n    #[serde(default = \"default_kernel\")]\n    pub kernel: String,\n}\n\nfn default_kernel() -> String {\n    \"python3\".to_string()\n}\n",
        "nodejs": "// TypeScript interfaces for output hints\ninterface OutputHints {\n    jupyter?: {\n        include_interactive_plots?: boolean;\n        include_performance_section?: boolean;\n        kernel?: string;\n    };\n    \n    vue_site?: {\n        include_live_demo?: boolean;\n        seo_keywords?: string[];\n        og_image?: string;\n    };\n    \n    llm_rag?: {\n        chunk_strategy?: 'by_example' | 'by_section' | 'fixed_size';\n        max_chunk_size?: number;\n        include_metadata?: boolean;\n    };\n}\n\n// Generator reads hints with defaults\nfunction getJupyterHints(schema: Schema): JupyterHints {\n    return {\n        include_interactive_plots: false,\n        include_performance_section: false,\n        kernel: 'python3',\n        ...schema.outputs?.jupyter,\n    };\n}\n"
      },
      "expected_output": "Output hints applied:\n- Jupyter: plots enabled, no perf section\n- Vue: live demo, 3 SEO keywords\n- LLM-RAG: by_example chunking, 512 max"
    }
  ],
  "article": {
    "introduction": {
      "hook": "The **Schema Reference** defines the complete specification for MathHook Knowledge Base documentation schemas. Schemas follow a **Hybrid Design** with required core content, optional metadata, and format-specific output hints.\n\nThis reference covers all fields, their types, validation rules, and best practices for creating comprehensive mathematical documentation."
    },
    "sections": [
      {
        "title": "Core Fields (Required)",
        "content": "Every schema MUST include these fields:\n\n### topic ###\n**Type**: `string`\n**Format**: `category.subcategory` (dot-separated hierarchy)\n**Example**: `\"calculus.derivative\"`, `\"ode.first_order.separable\"`\n\n### title ###\n**Type**: `string`\n**Description**: Human-readable title displayed in documentation\n**Example**: `\"Symbolic Differentiation\"`\n\n### description ###\n**Type**: `string` (multiline supported)\n**Description**: Brief explanation of the topic\n**Length**: 1-3 sentences recommended\n\n### examples ###\n**Type**: `array` of `Example`\n**Minimum**: 1 example required\n**Each example requires**:\n- `title`: Example name\n- `explanation`: What the example demonstrates\n- `code.python`, `code.rust`, `code.nodejs`: Multi-language code"
      },
      {
        "title": "Optional Metadata",
        "content": "### mathematical_definition ###\n**Type**: `string` (LaTeX supported)\n**Usage**: Display mathematical formula at top of documentation\n**Format**: Use `$$...$$` for display math\n\n### code_refs ###\n**Type**: `object` with `rust`, `python`, `nodejs` keys\n**Usage**: Links to actual function implementations\n**Example**: `{rust: \"mathhook_core::calculus::derivative\"}`\n\n### use_cases ###\n**Type**: `array` of `string`\n**Usage**: Real-world applications of this topic\n\n### related_topics ###\n**Type**: `array` of `string` (topic IDs)\n**Usage**: Cross-references to related documentation\n\n### performance ###\n**Type**: `object` with `complexity`, `typical_time`\n**Usage**: Performance characteristics"
      },
      {
        "title": "Article Content",
        "content": "For long-form documentation, include an `article` section:\n\n### article.introduction.hook ###\n**Type**: `string`\n**Usage**: Opening paragraph to engage readers\n\n### article.sections ###\n**Type**: `array` of `{title, content}`\n**Usage**: Main documentation content\n**Content format**: Markdown with LaTeX math support\n\n### article.sidebars ###\n**Type**: `array` of `{type, title, content}`\n**Types**: `note`, `warning`, `info`, `performance`\n**Usage**: Callout boxes for important information"
      },
      {
        "title": "Validation Rules",
        "content": "Schemas are validated against these rules:\n\n### Required Field Validation ###\n- `topic`: Must be non-empty string\n- `title`: Must be non-empty string\n- `description`: Must be non-empty string\n- `examples`: Must have at least 1 example\n\n### Example Validation ###\n- Each example must have `title`, `explanation`, `code`\n- `code` must include all three languages: `python`, `rust`, `nodejs`\n- Code should be syntactically valid (parser check)\n\n### Cross-Language Consistency ###\n- Code examples should produce mathematically equivalent results\n- Same input should yield same output across languages\n\n### Topic ID Format ###\n- Lowercase letters, numbers, underscores, dots only\n- Hierarchy separated by dots: `category.subcategory.item`\n- Examples: `calculus.derivative`, `ode.first_order.linear`"
      }
    ],
    "sidebars": [
      {
        "type": "note",
        "title": "Design Philosophy",
        "content": "**Hybrid Option C**: Core content (required) + Output hints (optional) + Engine fills gaps.\n\nThis design ensures:\n- Minimal required fields for quick schema creation\n- Rich optional fields for comprehensive docs\n- Format-specific customization without cluttering core"
      },
      {
        "type": "warning",
        "title": "Multi-Language Code",
        "content": "All three languages (Python, Rust, JavaScript) are **required** in code examples.\n\nMathHook is a cross-platform library - documentation must serve all user bases equally."
      }
    ]
  },
  "use_cases": [
    "Creating new documentation schemas",
    "Understanding schema validation requirements",
    "Configuring format-specific output hints",
    "Adding rich article content"
  ],
  "related_topics": [
    "dev-claude-md",
    "dev-architecture",
    "dev-generator-guide"
  ]
}
