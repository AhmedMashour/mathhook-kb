{
  "topic": "operations.substitution",
  "title": "Substitution",
  "description": "Replace variables with values or expressions to evaluate, simplify, or transform expressions.\n",
  "mathematical_definition": "**Function Evaluation:**\n$$f(a) = f(x)|_{x=a}$$\nSubstitute $x = a$ into function $f(x)$.\n\n**Composition:**\n$$f(g(x)) = f(u)|_{u=g(x)}$$\nSubstitute $u = g(x)$ into function $f(u)$.\n\n**U-Substitution (Integration):**\n$$\\int f(g(x)) \\cdot g'(x) \\, dx = \\int f(u) \\, du$$\nwhere $u = g(x)$ and $du = g'(x) \\, dx$.\n\n**Change of Variables (Multivariable):**\n$$\\frac{\\partial f}{\\partial x} = \\frac{\\partial f}{\\partial u} \\cdot \\frac{\\partial u}{\\partial x}$$\n",
  "code_refs": {
    "rust": "mathhook_core::substitution::Substitute",
    "python": "mathhook.substitute",
    "nodejs": "mathhook.substitute"
  },
  "examples": [
    {
      "title": "Single Variable Substitution",
      "explanation": "Replace variable with number",
      "code": {
        "rust": "use mathhook::prelude::*;\n\nlet x = symbol!(x);\n\n// Substitute x = 2 into x² + 3x\nlet expr1 = expr!(x ^ 2 + 3 * x);\nlet result1 = expr1.substitute(&x, &expr!(2));\n// Result: 4 + 6 = 10\n\n// Substitute x = -1 into x³ - 2x + 1\nlet expr2 = expr!(x ^ 3 - 2 * x + 1);\nlet result2 = expr2.substitute(&x, &expr!(-1));\n// Result: -1 + 2 + 1 = 2\n",
        "python": "from mathhook import symbol\n\nx = symbol('x')\n\n# Substitute x = 2 into x² + 3x\nexpr1 = x**2 + 3*x\nresult1 = expr1.subs(x, 2)\n# Result: 10\n",
        "nodejs": "const { symbol } = require('mathhook');\n\nconst x = symbol('x');\n\n// Substitute x = 2 into x² + 3x\nconst expr1 = x.pow(2).add(x.mul(3));\nconst result1 = expr1.substitute(x, 2);\n// Result: 10\n"
      }
    },
    {
      "title": "Expression Substitution",
      "explanation": "Replace with another expression",
      "code": {
        "rust": "use mathhook::prelude::*;\n\nlet x = symbol!(x);\nlet y = symbol!(y);\n\n// Substitute x = y + 1 into x² + 3x\nlet expression = expr!(x ^ 2 + 3 * x);\nlet substituted = expression.substitute(&x, &expr!(y + 1));\n// Result: (y+1)² + 3(y+1)\n\n// Expand for cleaner form\nlet expanded = substituted.expand();\n// Result: y² + 2y + 1 + 3y + 3 = y² + 5y + 4\n",
        "python": "from mathhook import symbol\n\nx = symbol('x')\ny = symbol('y')\n\n# Substitute x = y + 1 into x² + 3x\nexpression = x**2 + 3*x\nsubstituted = expression.subs(x, y + 1)\n# Result: (y+1)^2 + 3(y+1)\n\n# Expand for cleaner form\nexpanded = substituted.expand()\n# Result: y^2 + 5*y + 4\n",
        "nodejs": "const { symbol } = require('mathhook');\n\nconst x = symbol('x');\nconst y = symbol('y');\n\n// Substitute x = y + 1 into x² + 3x\nconst expression = x.pow(2).add(x.mul(3));\nconst substituted = expression.substitute(x, y.add(1));\n// Result: (y+1)^2 + 3(y+1)\n"
      }
    },
    {
      "title": "U-Substitution for Integration",
      "explanation": "Transform difficult integrals",
      "code": {
        "rust": "use mathhook::prelude::*;\nuse integrals::Integration;\n\nlet x = symbol!(x);\nlet u = symbol!(u);\n\n// Integrate: ∫ 2x·e^(x²) dx\n// Let u = x², then du = 2x dx\nlet integrand = expr!(2 * x * exp(x ^ 2));\n\n// Manual substitution\nlet u_expr = expr!(x ^ 2);  // u = x²\nlet integrand_u = integrand.substitute(&expr!(x ^ 2), &u);\n// Result: ∫ e^u du = e^u + C\n\n// Back-substitute: e^(x²) + C\nlet result = expr!(exp(u)).substitute(&u, &u_expr);\n// Result: e^(x²) + C\n",
        "python": "from mathhook import symbol, integrate\n\nx = symbol('x')\nu = symbol('u')\n\n# Integrate: ∫ 2x·e^(x²) dx\nintegrand = 2*x*exp(x**2)\n\n# Manual substitution\nu_expr = x**2  # u = x²\nintegrand_u = integrand.subs(x**2, u)\n# Result: ∫ e^u du = e^u + C\n\n# Back-substitute: e^(x²) + C\nresult = exp(u).subs(u, u_expr)\n# Result: e^(x²) + C\n",
        "nodejs": "const { symbol, expr } = require('mathhook');\n\nconst x = symbol('x');\nconst u = symbol('u');\n\n// Integrate: ∫ 2x·e^(x²) dx\nconst integrand = x.mul(2).mul(expr('exp(x^2)'));\n\n// Manual substitution\nconst uExpr = x.pow(2);  // u = x²\nconst integrandU = integrand.substitute(x.pow(2), u);\n// Result: ∫ e^u du = e^u + C\n"
      }
    }
  ],
  "use_cases": [
    "Evaluation: Compute numerical value at specific point",
    "Verification: Check if value satisfies equation",
    "Simplification: Replace complex subexpression with simple variable",
    "Integration: U-substitution to transform difficult integrals",
    "Change of coordinates: Transform between coordinate systems"
  ],
  "related_topics": [
    "operations.solving",
    "operations.integration",
    "operations.differentiation",
    "operations.simplification"
  ],
  "performance": {
    "complexity": "O(n) where n = expression tree size"
  },
  "metadata": {
    "schema_version": "1.0"
  }
}